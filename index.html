<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Al√©m dos Cochichos</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background: black;
      overflow: hidden;
    }
    #menu, #game, #credits {
      position: absolute;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    #menu {
      background: url("imagens/menu.png") no-repeat center center/cover;
      display: flex;
    }
    #menu img {
      width: 400px;
      margin-bottom: 20px;
    }
    #menu button, #credits button {
      margin: 10px;
      padding: 15px 30px;
      font-size: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.8);
    }
    #game {
      background-size: cover;
      background-position: center;
      display: flex;
      justify-content: flex-end;
      align-items: flex-end;
      flex-direction: column;
    }
    #character {
      position: absolute;
      bottom: 100px;
      left: 50px;
      height: 70%;
    }
    #dialogueBox {
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 20px;
      width: 90%;
      max-width: 900px;
      margin: 20px auto;
      border-radius: 15px;
      font-size: 18px;
    }
    #choices {
      margin-top: 15px;
    }
    #choices button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      border: none;
    }
    #credits {
      background: black;
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>

<div id="menu">
  <img src="imagens/logo.png" alt="Logo do Jogo">
  <button onclick="startGame()">Iniciar</button>
  <button onclick="showCredits()">Cr√©ditos</button>
  <button onclick="closeGame()">Sair</button>
</div>

<div id="credits">
  <h1>Cr√©ditos</h1>
  <p>Hist√≥ria, Arte e Desenvolvimento: Voc√™ :)</p>
  <button onclick="backToMenu()">Voltar</button>
</div>

<div id="game">
  <img id="character" src="">
  <div id="dialogueBox">
    <p id="dialogueText"></p>
    <div id="choices"></div>
  </div>
</div>

<!-- Sons -->
<audio id="menuMusic" loop>
  <source src="sons/musica_menu.mp3" type="audio/mpeg">
</audio>
<audio id="gameMusic" loop>
  <source src="sons/musica_jogo.mp3" type="audio/mpeg">
</audio>
<audio id="clickSound">
  <source src="sons/click.mp3" type="audio/mpeg">
</audio>

<script>
const menuMusic = document.getElementById("menuMusic");
const gameMusic = document.getElementById("gameMusic");
const clickSound = document.getElementById("clickSound");

let currentScene = 0;
let affection = 0;

const scenes = [
  {
    bg: "imagens/sala.png",
    char: "imagens/personagem_neutra.png",
    text: "O professor apresenta a nova aluna. A sala cai em sil√™ncio, cochichos surgem ao fundo.",
    choices: [
      { text: "Ignorar.", next: 1 },
      { text: "Puxar papo.", next: 2, affection: 1 }
    ]
  },
  {
    bg: "imagens/sala.png",
    char: "imagens/personagem_triste.png",
    text: "Voc√™ decide n√£o falar nada. Ela permanece quieta, olhando para baixo.",
    choices: [{ text: "Seguir a aula.", next: 3 }]
  },
  {
    bg: "imagens/sala.png",
    char: "imagens/personagem_desconfortavel.png",
    text: "Voc√™ tenta puxar papo, mas ela responde timidamente, quase recusando.",
    choices: [{ text: "Continuar a aula.", next: 3 }]
  },
  {
    bg: "imagens/patio.png",
    char: "imagens/personagem_neutra.png",
    text: "No intervalo, voc√™ a v√™ sozinha, desenhando em um caderno.",
    choices: [
      { text: "Comentar sobre o desenho.", next: 4, affection: 1 },
      { text: "Respeitar o espa√ßo dela.", next: 5 }
    ]
  },
  {
    bg: "imagens/patio.png",
    char: "imagens/personagem_envergonhada.png",
    text: "Ela fecha o caderno rapidamente, corando. Mas parece guardar a lembran√ßa.",
    choices: [{ text: "Sorrir e sair.", next: 6 }]
  },
  {
    bg: "imagens/patio.png",
    char: "imagens/personagem_triste.png",
    text: "Voc√™ respeita e passa reto. Ela permanece isolada.",
    choices: [{ text: "Ir embora.", next: 6 }]
  },
  {
    bg: "imagens/biblioteca.png",
    char: "imagens/personagem_feliz.png",
    text: "Na biblioteca, ela aponta um livro que voc√™ procurava. Uma ajuda inesperada.",
    choices: [
      { text: "Agradecer gentilmente.", next: 7, affection: 1 },
      { text: "Fingir naturalidade.", next: 7 }
    ]
  },
  {
    bg: "imagens/corredor.png",
    char: "imagens/personagem_triste.png",
    text: "Um colega zoa ela no corredor. Voc√™ precisa decidir.",
    choices: [
      { text: "Defender ela.", next: 8, affection: 2 },
      { text: "Ficar em sil√™ncio.", next: 9 }
    ]
  },
  {
    bg: "imagens/rua.png",
    char: "imagens/personagem_romantica.png",
    text: "Ap√≥s a chuva, voc√™s se abrigam juntos. Ela solta: '√Äs vezes √© dif√≠cil acreditar que algu√©m realmente se importa.'",
    choices: [{ text: "Olhar nos olhos dela.", next: 10, affection: 2 }]
  },
  {
    bg: "imagens/rua.png",
    char: "imagens/personagem_triste.png",
    text: "Ela se afasta e segue sozinha para casa.",
    choices: [{ text: "Fim do dia.", next: 10 }]
  },
  {
    bg: "imagens/sala.png",
    char: "imagens/personagem_feliz.png",
    text: "Chega o dia da festa da escola. Ela hesita em ir.",
    choices: [
      { text: "Convid√°-la para ir com voc√™.", next: 11, affection: 2 },
      { text: "Deixar a decis√£o com ela.", next: 12 }
    ]
  },
  {
    bg: "imagens/patio.png",
    char: "imagens/personagem_romantica.png",
    text: "Voc√™s v√£o juntos. Pela primeira vez, ela sorri abertamente.",
    choices: [{ text: "Final Romance", next: "romance" }]
  },
  {
    bg: "imagens/patio.png",
    char: "imagens/personagem_feliz.png",
    text: "Ela prefere n√£o ir. Mas a amizade entre voc√™s est√° s√≥lida.",
    choices: [{ text: "Final Amizade", next: "amizade" }]
  }
];

// finais
const endings = {
  romance: {
    bg: "imagens/rua.png",
    char: "imagens/personagem_romantica.png",
    text: "Voc√™s caminham juntos sob a lua. Ela segura sua m√£o. Final Romance ‚ù§Ô∏è"
  },
  amizade: {
    bg: "imagens/patio.png",
    char: "imagens/personagem_feliz.png",
    text: "Voc√™s continuam amigos, compartilhando pequenas alegrias. Final Amizade ü§ù"
  },
  distanciamento: {
    bg: "imagens/corredor.png",
    char: "imagens/personagem_triste.png",
    text: "Ela segue sua vida distante, e voc√™ percebe que perdeu a chance. Final Triste üíî"
  }
};

function startGame() {
  document.getElementById("menu").style.display = "none";
  document.getElementById("game").style.display = "flex";
  menuMusic.pause();
  menuMusic.currentTime = 0;
  gameMusic.play();
  showScene(0);
}

function showCredits() {
  document.getElementById("menu").style.display = "none";
  document.getElementById("credits").style.display = "flex";
}

function backToMenu() {
  document.getElementById("credits").style.display = "none";
  document.getElementById("menu").style.display = "flex";
}

function closeGame() {
  window.close();
}

function showScene(index) {
  if (typeof index === "string") {
    let ending = endings[index];
    document.getElementById("game").style.backgroundImage = `url(${ending.bg})`;
    document.getElementById("character").src = ending.char;
    document.getElementById("dialogueText").innerText = ending.text;
    document.getElementById("choices").innerHTML = `<button onclick="backToMenu()">Voltar ao Menu</button>`;
    return;
  }

  currentScene = index;
  let scene = scenes[index];
  document.getElementById("game").style.backgroundImage = `url(${scene.bg})`;
  document.getElementById("character").src = scene.char;
  document.getElementById("dialogueText").innerText = scene.text;
  let choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";
  scene.choices.forEach(choice => {
    let btn = document.createElement("button");
    btn.innerText = choice.text;
    btn.onclick = () => {
      clickSound.play();
      if (choice.affection) affection += choice.affection;
      if (choice.next === 10 && affection < 3) {
        showScene("distanciamento");
      } else {
        showScene(choice.next);
      }
    };
    choicesDiv.appendChild(btn);
  });
}

// inicia tocando m√∫sica do menu
window.onload = () => {
  menuMusic.play();
};
</script>
</body>
</html>
